!function(e){function t(){Qv.AddExtension(a,function(){function t(){l=D.Layout.Text0.text,("/"==l.slice(-1)||"\\"==l.slice(-1))&&(l=l.substr(0,l.length-1)),c=D.Layout.Text1.text,i=D.Layout.Text2.text,u=D.Layout.Text3.text,d=D.Layout.Text4.text;var e=D.Layout.Text5.text,t=e.split(",");if(t.length>0){v=[];for(var a=0;a<t.length;a+=2)a<t.length-1&&v.push({key:t[a],value:t[a+1]})}x=D.Layout.Text6.text,y=D.Layout.Text7.text,m=D.Layout.Text8.text}function n(){var e=document.createElement("div");e.id="SelectBox_"+I(),e.className="containerDiv",D.Element.appendChild(e)}function p(){if(""!=x){var t=document.createElement("div");t.className="SelectionLabelDiv",t.innerHTML="<span>"+x+"</span>",e("#SelectBox_"+I()).append(t)}var a=document.createElement("div");a.className="select-style";for(var n="",s=0;s<v.length;s++)n=n+"<option value='"+v[s].value+"'",n=n+">"+v[s].key+"</option>";if(a.innerHTML="<select id='StatusSelect"+I()+"' class='statusselectbox'>"+n+"</select>",document.all&&!document.addEventListener){var r=e("SelectBox_"+I()).width(),l=r-40;a.style.width=l+"px"}if(e("#SelectBox_"+I()).append(a),document.all&&!document.addEventListener){var r=e("#SelectBox_"+I()).width(),l=r-45;a.style.width=l+"px"}var i=document.createElement("div");i.className="imageContainer";var c=document.createElement("div");c.id="ajaxLoading"+I(),c.className="ajaxDiv",c.style.backgroundImage="url('"+o+"ajax-loader.gif')",c.style.display="none";var u=document.createElement("div");u.className="ajaxDiv",u.id="ajaxError"+I(),u.style.backgroundImage="url('"+o+"error.png')",u.style.display="none",i.appendChild(c),i.appendChild(u),e("#SelectBox_"+I()).append(i),E()}function E(){var e=document.getElementById("StatusSelect"+I());e.setAttribute("KeyValue",D.Data.Rows[0][0].text),e.addEventListener?e.addEventListener("change",S,!1):e.attachEvent("onchange",S)}function f(){e("#SelectBox_"+I()).empty()}function g(){if(L(),1==D.Data.Rows.length)if(r!=D.Data.Rows[0][0].text){r=D.Data.Rows[0][0].text;var t={Table:i,OSUser:m,Id:r,APIKey:y,ConnectionName:c};b(),e.ajax({type:"GET",url:l+"/Status/getstatus",dataType:"json",data:t,success:function(e){T(),B(),e.Success?(s=e.Status,h(s)):j(void 0!=e.Error?e.Error.ErrorCode+":"+e.Error.Message:"Failed to get current status")},error:function(e){j(e.responseText.length<200?e.status+": "+e.responseText:e.status+": Failed to retrieve status"),T()}})}else h(s),T()}function S(){L();var t=document.getElementById("StatusSelect"+I()),a=t.value,n=t.getAttribute("KeyValue"),o={Table:i,OSUser:m,TransactionTable:u,Status:a,Id:n,APIKey:y,ConnectionName:c};b(),e.ajax({type:"POST",url:l+"/status/UpdateStatus",dataType:"json",data:o,success:function(e){B(),e.Success?s=a:j(void 0!=e.Error?e.Error.ErrorCode+":"+e.Error.Message:"could not change status"),T()},error:function(e){j(e.responseText.length<200?e.status+": "+e.responseText:e.status+": Failed to register new status"),T()}})}function h(e){document.getElementById("StatusSelect"+I()).value=e}function T(){e("#SelectBox_"+I()+" .statusselectbox").each(function(){e(this).removeAttr("disabled")})}function L(){e("#SelectBox_"+I()+" .statusselectbox").each(function(){e(this).attr("disabled","true")})}function b(){B(),document.getElementById("ajaxLoading"+I()).style.display="inline-block"}function j(e){B(),ajaxErrorDiv=document.getElementById("ajaxError"+I()),ajaxErrorDiv.style.display="inline-block",ajaxErrorDiv.title=e}function B(){document.getElementById("ajaxLoading"+I()).style.display="none",document.getElementById("ajaxError"+I()).style.display="none"}function w(e){return e.replace("\\","_")}function I(){return w(D.Layout.ObjectId)}var D=this;e.support.cors=!0,t(),Qva.LoadCSS(Qva.Remote+(Qva.Remote.indexOf("?")>=0?"&":"?")+"public=only&name=Extensions/"+a+"/"+d),n(),f(),1==D.Data.Rows.length&&(p(),g())},!1)}var a="SelectBoxExt",n="Extensions/"+a+"/",o=Qva.Remote+(Qva.Remote.indexOf("?")>=0?"&":"?")+"public=only&name="+n,s=("qlikview"===window.location.host,""),r="",l="",i="",c="",u="",d="",x="",v=[{key:"",value:""},{key:"Reviewed",value:"R"}],m="",y="";t()}(jQuery);